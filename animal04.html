<!DOCTYPE html>
<html>

    <head>
        <script src="https://unpkg.com/konva@4.2.2/konva.min.js"></script>
        <meta charset="utf-8" />
        <title>Konva Animals on the Beach Game Demo</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                background-color: #f0f0f0;      
                };
            
        </style>
    </head>
    <body>
        <div id="container"></div>
        <script>
            var bkimage = "beach"
            var animals = ["monkey", "lion", "giraffe", "snake"]
            var paths ={
                monkey: {sx: 275, sy: 70, ex:300, ey: 420},
                lion: {sx: 400, sy: 70, ex:100, ey: 390},
                giraffe: {sx: 90, sy: 70, ex:390, ey: 250},
                snake: {sx: 10, sy: 70, ex:275, ey: 350},
            }
            var loadedImages = 0;

            loadImages(bkimage, animals, initStage)

            function loadImages(bgimg, fgimgs, callback) {
                var assetDir = 'assets/';
                var variants = ["", "_black", "_glow"];
                var images = {};
                var sources = [bgimg]
                for (var i = 0; i < fgimgs.length; i++){
                    for (var j = 0; j < variants.length; j++){
                        sources.push(fgimgs[i]+variants[j])
                    }
                }
                console.log("Sources", sources)
                var numImages = source.length;
                console.log("number", numImages)
                for  (var i=0;i<sources.length; i++){
                    var src =sources[i]
                    images[src] = new Image();
                    images[src].src = assetDir + src + ".png";
                    images[src].onload = function () {
                        if(++loadedImages >=numImages){
                            callback(images);
                        }
                    }
                 }
                 console.log("images", images)
            }
        </script>
    </body>
</html>